<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>数据爬取</title>
  <style>
    html,body{height:100%;margin:0;font-family:Consolas,monospace;background:#000;color:#0f0;overflow:hidden}
    /* 背景代码雨 */
    .matrix{
      position:fixed;left:0;top:0;width:100%;height:100%;background:#000;z-index:0;mix-blend-mode:screen;
    }
    .matrix canvas{width:100%;height:100%;display:block}
    /* 终端窗口 */
    #terminal{
      position:relative;z-index:2;box-sizing:border-box;padding:28px 36px;height:100vh;overflow:auto;
      background:linear-gradient(180deg,rgba(0,0,0,0.6),rgba(0,0,0,0.3));
      text-shadow:0 0 6px rgba(0,255,150,0.08);
      color: #7cffb2;
    }
    .cmd-line{opacity:0;transform:translateY(6px);animation:fadeUp .45s forwards}
    @keyframes fadeUp{to{opacity:1;transform:none}}
    .typed{display:inline-block}
    .cursor{display:inline-block;width:10px;height:18px;background:#7cffb2;margin-left:4px;vertical-align:middle;animation:blink 0.8s steps(2) infinite}
    @keyframes blink{50%{opacity:0}}
    /* 进度条 */
    .progress{margin-top:20px;height:18px;width:70%;background:linear-gradient(90deg,#001100,#003300);border-radius:6px;border:1px solid rgba(124,255,178,0.12);overflow:hidden;box-shadow:0 0 18px rgba(124,255,178,0.06)}
    .progress > span{display:block;height:100%;width:0;background:linear-gradient(90deg,#00ff84,#00c2ff);transition:width 0.12s linear}
    /* 扫描条 */
    .scanner{position:absolute;left:0;top:0;width:100%;height:100%;pointer-events:none;z-index:1;background:linear-gradient(180deg,transparent,rgba(0,255,150,0.03),transparent);mix-blend-mode:overlay;animation:scan 3s linear infinite}
    @keyframes scan{0%{transform:translateY(-100%)}100%{transform:translateY(100%)}}

    /* 更真实 BSOD 样式 */
    #bsod{position:fixed;left:0;top:0;width:100%;height:100%;background:#0078d7;color:#fff;display:flex;flex-direction:column;align-items:flex-start;justify-content:center;font-family:Segoe UI,Segoe UI Emoji,Arial,sans-serif;font-size:18px;visibility:hidden;z-index:20;padding-left:8vw;box-sizing:border-box}
    #bsod .face{font-size:96px;margin-bottom:8px}
    #bsod .main-title{font-size:28px;font-weight:600;margin-bottom:12px}
    #bsod .msg{max-width:60ch;line-height:1.6;color:rgba(255,255,255,0.95);margin-bottom:12px}
    #bsod .collect{margin-top:6px;font-size:16px;opacity:0.95}
    #bsod .stopcode{margin-top:18px;font-size:15px;color:rgba(255,255,255,0.95)}
    #bsod .hint{margin-top:20px;font-size:14px;color:rgba(255,255,255,0.9)}
    /* 小标签显示被捉弄了（在屏幕角落，避免破坏真实感） */
    #bsod .prank-tag{position:fixed;right:12px;bottom:18px;background:#fff;color:#000;padding:6px 10px;border-radius:6px;font-weight:700;font-size:16px}
    /* 轻微闪烁故障效果 */
    .bsod-flicker{animation:flicker 360ms linear 3}
    @keyframes flicker{0%{opacity:1}50%{opacity:0.85}100%{opacity:1}}
    @media (max-width:600px){#bsod{padding-left:6vw}}
    /* 小提示 */
    .foot{position:fixed;left:12px;bottom:12px;font-size:12px;color:rgba(180,255,200,0.5);z-index:3}
  </style>
</head>
<body>
  <div class="matrix"><canvas id="rain"></canvas></div>
  <div id="terminal" role="log" aria-live="polite"></div>
  <div class="scanner" aria-hidden="true"></div>

  <!-- 真实感更强的蓝屏 -->
  <div id="bsod" role="alertdialog" aria-hidden="true">
    <div class="face">:（</div>
    <div class="main-title">您的电脑遇到问题，需要重新启动。</div>
    <div class="msg">我们正在收集有关错误的信息。完成后，我们会自动重新启动您的电脑。完成收集的进度如下。</div>
    <div class="collect">收集信息: <span id="collect-percent">0%</span></div>
    <div class="stopcode">停止代码: <strong>0xDEADBEEF (KERNEL_FAKE_FAILURE)</strong></div>
    <div class="hint">有关更多信息，请访问：`https://www.windows.com/stopcode` 并搜索停止代码。</div>
    <div class="prank-tag">被捉弄了</div>
  </div>

  <div class="foot">模拟演示 — 仅用于恶作剧</div>

  <script>
    /* ===== matrix rain (保留) ===== */
    (function(){
      const canvas = document.getElementById('rain');
      const ctx = canvas.getContext('2d');
      function resize(){canvas.width=innerWidth;canvas.height=innerHeight}
      addEventListener('resize',resize);
      resize();
      const cols = Math.max(10,Math.floor(canvas.width/14));
      const ypos = Array(cols).fill(0);
      function tick(){
        ctx.fillStyle='rgba(0,0,0,0.15)';
        ctx.fillRect(0,0,canvas.width,canvas.height);
        ctx.fillStyle='#00ff99';
        ctx.font='14px monospace';
        for(let i=0;i<ypos.length;i++){
          const text = String.fromCharCode(33 + Math.random()*94 | 0);
          ctx.fillText(text,i*14,ypos[i]*14);
          if(ypos[i]*14>canvas.height && Math.random()>0.975) ypos[i]=0;
          ypos[i]++;
        }
        requestAnimationFrame(tick);
      }
      tick();
    })();

    /* ===== terminal content & typing (保留) ===== */
    const terminal = document.getElementById('terminal');
    const bsod = document.getElementById('bsod');
    const collectEl = document.getElementById('collect-percent');

    const scriptLines = [
      {cmd:'sudo systemctl scan --full',out:'启动深度安全扫描...'},
      {cmd:'nmap -A 127.0.0.1',out:'发现 7 个开放端口，尝试漏洞利用...'},
      {cmd:'python3 exploit.py --target all',out:'利用已加载模块: kernel-exploit, mem-scrambler'},
      {cmd:'injector --stealth',out:'注入成功，提升权限至 SYSTEM'},
      {cmd:'encryptor --fast --all',out:'开始加密文件系统...  (请勿断电)'},
      {cmd:'wiper --confirm',out:'发现非预期异常，正在回滚... 失败'},
      {cmd:'reboot -f',out:'系统内核错误: 未处理的例外'}
    ];

    function sleep(ms){return new Promise(r=>setTimeout(r,ms))}

    async function typeLine(container, text, speed=28){
      const span = document.createElement('span');
      span.className='typed';
      container.appendChild(span);
      for(let i=0;i<text.length;i++){
        span.textContent += text[i];
        container.scrollTop = container.scrollHeight;
        await sleep(speed + Math.random()*20 - 10);
      }
      return span;
    }

    async function showTerminal(){
      for(let i=0;i<scriptLines.length;i++){
        const wrap = document.createElement('div');
        wrap.className='cmd-line';
        const prompt = document.createElement('span');
        prompt.style.color='#aaffd1';
        prompt.textContent = '[root@system ~]# ';
        wrap.appendChild(prompt);
        terminal.appendChild(wrap);
        const typed = await typeLine(wrap, scriptLines[i].cmd, 30);
        const cursor = document.createElement('span');
        cursor.className='cursor';
        wrap.appendChild(cursor);
        await sleep(300 + Math.random()*400);
        cursor.remove();
        const out = document.createElement('div');
        out.style.color='#cfeee0';
        out.style.marginLeft='6px';
        out.textContent = scriptLines[i].out;
        terminal.appendChild(out);
        terminal.scrollTop = terminal.scrollHeight;
        await sleep(350 + i*80);
      }

      const progWrap = document.createElement('div');
      progWrap.className='progress';
      const bar = document.createElement('span');
      progWrap.appendChild(bar);
      terminal.appendChild(progWrap);
      terminal.scrollTop = terminal.scrollHeight;

      for(let p=0;p<=100;p+=1){
        bar.style.width = p + '%';
        await sleep(24 - Math.min(12,Math.floor(p/10)));
        if(p===86){await glitchSound();}
      }
      const fail = document.createElement('div');
      fail.style.color='#ff9b9b';
      fail.textContent = '致命错误: 内核保护触发。准备重启...';
      terminal.appendChild(fail);
      terminal.scrollTop = terminal.scrollHeight;
      await sleep(900);
      showBSOD();
    }

    /* ===== 声音 ===== */
    async function glitchSound(){
      try{
        const ctx = new (window.AudioContext||window.webkitAudioContext)();
        const now = ctx.currentTime;
        const o1 = ctx.createOscillator(), o2 = ctx.createOscillator();
        const g = ctx.createGain();
        o1.type='square'; o1.frequency.setValueAtTime(360, now);
        o2.type='sawtooth'; o2.frequency.setValueAtTime(420, now);
        g.gain.setValueAtTime(0.02, now);
        o1.connect(g); o2.connect(g); g.connect(ctx.destination);
        o1.start(now); o2.start(now);
        g.gain.exponentialRampToValueAtTime(0.0001, now + 0.15);
        setTimeout(()=>{o1.stop();o2.stop(); ctx.close();},180);
      }catch(e){}
    }

    /* ===== 更真实的蓝屏显示逻辑 ===== */
    function showBSOD(){
      // 隐藏其他视觉元素
      document.querySelector('.matrix').style.display = 'none';
      document.getElementById('terminal').style.display = 'none';
      document.querySelector('.scanner').style.display = 'none';

      bsod.style.visibility='visible';
      bsod.classList.add('bsod-flicker');
      bsod.setAttribute('aria-hidden','false');
      document.body.style.overflow='hidden';

      // 模拟收集信息进度
      let pct = 0;
      collectEl.textContent = '0%';
      const iv = setInterval(()=>{
        pct += Math.floor(1 + Math.random()*6);
        if(pct>=100) pct=100;
        collectEl.textContent = pct + '%';
        if(pct >= 100){
          clearInterval(iv);
          // 完成后短暂停顿，显示“被捉弄了”标签（已存在）并停止闪烁
          setTimeout(()=>{ bsod.classList.remove('bsod-flicker'); }, 600);
        }
      }, 120 + Math.random()*80);

      try{glitchSound();}catch(e){}
    }

    // 阻止常见关闭快捷键（体验用）
    document.addEventListener('keydown',e=>{
      if(e.key==='Escape' || (e.ctrlKey && (e.key.toLowerCase()==='w' || e.key.toLowerCase()==='r'))){
        e.preventDefault(); e.stopPropagation();
      }
      // 蓝屏显示时，按任意键重载（模拟重启）
      if(bsod.style.visibility==='visible'){ location.reload(); }
    },true);

    showTerminal();
  </script>
</body>
</html>

