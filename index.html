<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<title>æˆ‘å…¥ä¾µä½ çš„ç”µè„‘å’¯ï¼</title>
<style>
    body {
        margin: 0;
        background: black;
        overflow: hidden;
        font-family: Consolas, monospace;
        color: #0f0;
    }

    /* ä»£ç é›¨ç”»å¸ƒ */
    #matrix {
        position: absolute;
        top: 0;
        left: 0;
        z-index: 1;
    }

    /* ç»ˆç«¯æ–‡æœ¬ */
    #terminal {
        position: absolute;
        top: 20px;
        left: 20px;
        z-index: 10;
        white-space: pre-wrap;
        text-shadow: 0 0 6px #0f0;
        font-size: 16px;
        width: 60%;
    }
    .cursor {
        display: inline-block;
        width: 10px;
        height: 18px;
        background: #0f0;
        animation: blink .7s infinite;
    }
    @keyframes blink {
        0%, 50% { opacity: 1; }
        51%, 100% { opacity: 0; }
    }

    /* æˆ˜æ–—åŒº */
    #arena {
        position: absolute;
        bottom: 80px;
        right: 50px;
        width: 420px;
        height: 230px;
        border: 2px solid #0f0;
        box-shadow: 0 0 15px #0f0;
        z-index: 20;
        background: rgba(0,0,0,0.4);
    }

    /* è“å± */
    #bluescreen {
        position: fixed;
        inset: 0;
        background: #0a36ff;
        color: white;
        font-family: "Segoe UI", sans-serif;
        text-align: left;
        padding: 40px;
        font-size: 22px;
        line-height: 1.6;
        display: none;
        z-index: 9999;
    }
</style>
</head>
<body>

<!-- ä»£ç é›¨ -->
<canvas id="matrix"></canvas>

<!-- ç»ˆç«¯ -->
<div id="terminal"></div>
<div class="cursor"></div>

<!-- æˆ˜æ–—åœº -->
<div id="arena">
    <canvas id="battleCanvas" width="420" height="230"></canvas>
</div>

<!-- è“å± -->
<div id="bluescreen">
    <div style="font-size: 80px;">:(</div>
    <div style="margin-top: 20px;">ä½ çš„ç”µè„‘é‡åˆ°é—®é¢˜ï¼Œéœ€è¦é‡æ–°å¯åŠ¨ã€‚</div>
    <div style="margin-top: 10px;">æˆ‘ä»¬åªæ”¶é›†æŸäº›é”™è¯¯ä¿¡æ¯ï¼Œç„¶åæˆ‘ä»¬ä¼šä¸ºä½ é‡æ–°å¯åŠ¨ã€‚</div>

    <div style="margin-top: 40px; font-size: 18px;">
        é”™è¯¯ä»£ç ï¼šSYSTEM_HACKED_FATAL_ERROR
    </div>

    <div style="margin-top: 20px;">
        è¿›åº¦ï¼š 35%
    </div>

    <div style="margin-top: 50px; font-size: 16px; opacity: .7;">
        æƒ³äº†è§£æ›´å¤šä¿¡æ¯ï¼Œè¯·è®¿é—® https://fake.windows.support/hacked
    </div>

    <div style="font-size: 18px; margin-top: 10px;">
        ç‚¹å‡»ä»»æ„ä½ç½®ç»§ç»­â€¦
    </div>
</div>


<script>
/********************************/
/*        ä»£ç é›¨æ•ˆæœ           */
/********************************/
const canvas = document.getElementById("matrix");
const ctx = canvas.getContext("2d");

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

const chars = "01QWERTYUIOPæœªæ¥æœªæ¥AI01ã‚¢ã‚¤ã‚¦ã‚¨ã‚ª";
const fontSize = 20;
const columns = canvas.width / fontSize;
const drops = Array(Math.floor(columns)).fill(1);

function drawMatrix() {
    ctx.fillStyle = "rgba(0, 0, 0, .08)";
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    ctx.fillStyle = "#0f0";
    ctx.font = fontSize + "px monospace";

    drops.forEach((v, i) => {
        const text = chars[Math.floor(Math.random() * chars.length)];
        ctx.fillText(text, i * fontSize, v * fontSize);

        if (v * fontSize > canvas.height && Math.random() > 0.95)
            drops[i] = 0;

        drops[i]++;
    });
}
setInterval(drawMatrix, 33);


/********************************/
/*       ç»ˆç«¯æ–‡å­—æ•ˆæœ           */
/********************************/
const lines = [
    "[å¯åŠ¨] æ­£åœ¨æ¥å…¥å¤–éƒ¨æŒ‡ä»¤ç³»ç»Ÿ...",
    "[æˆåŠŸ] é‡å­åŠ é€Ÿå·²å¯ç”¨ã€‚",
    "[æ‰«æ] æ­£åœ¨åˆ†ææ•Œæ–¹åŠ¨ä½œ...",
    "[ç›‘æ§] æˆ˜æ–—ç”»é¢æ•è·ä¸­...",
    "",
    ">>> æˆ˜æ–—å³å°†å¼€å§‹ã€‚",
];
let idx = 0;

function printTerminal() {
    if (idx < lines.length) {
        terminal.textContent += lines[idx++] + "\n";
        setTimeout(printTerminal, 350);
    }
}
printTerminal();


/********************************/
/*     æ¸¸æˆåŠ¨ç”»æˆ˜æ–—ç³»ç»Ÿ         */
/********************************/
const canvasBattle = document.getElementById("battleCanvas");
const bctx = canvasBattle.getContext("2d");

// ç©å®¶åŠ¨ç”»
const playerSprites = {
    idle: new Image(),
    attack: new Image(),
    hurt: new Image(),
    dead: new Image()
};

// æ•ŒäººåŠ¨ç”»
const enemySprites = {
    idle: new Image(),
    attack: new Image(),
    hurt: new Image(),
    dead: new Image()
};

// ä½¿ç”¨å¯è®¿é—®çš„ CDN å›¾åƒï¼ˆçœŸå®æ¸¸æˆåŠ¨ä½œï¼‰
playerSprites.idle.src   = "https://i.imgur.com/fkGx3Dz.png";
playerSprites.attack.src = "https://i.imgur.com/7ej6ZQy.png";
playerSprites.hurt.src   = "https://i.imgur.com/7ynJvEh.png";
playerSprites.dead.src   = "https://i.imgur.com/bJzcLHs.png";

enemySprites.idle.src   = "https://i.imgur.com/sKoG6p4.png";
enemySprites.attack.src = "https://i.imgur.com/LM0yw32.png";
enemySprites.hurt.src   = "https://i.imgur.com/ZFsWR06.png";
enemySprites.dead.src   = "https://i.imgur.com/ZQ6MDJ0.png";


// fighter å¯¹è±¡
function Fighter(x, spriteSet) {
    this.x = x;
    this.y = 120;
    this.hp = 100;
    this.state = "idle";
    this.frame = 0;
    this.frameCount = 4;
    this.spriteSet = spriteSet;

    this.width = 64;
    this.height = 64;
}

Fighter.prototype.draw = function () {
    const sprite = this.spriteSet[this.state];
    const frameX = (this.frame % this.frameCount) * this.width;

    bctx.drawImage(
        sprite,
        frameX, 0, this.width, this.height,
        this.x, this.y, this.width * 2, this.height * 2
    );
};

Fighter.prototype.update = function () {
    this.frame++;

    if (this.state === "dead" && this.frame > 7) {
        this.frame = 7;
    }
};

// å®ä¾‹åŒ–è§’è‰²
const p1 = new Fighter(40, playerSprites);
const p2 = new Fighter(260, enemySprites);

function playAnimation(actor, action) {
    actor.state = action;
    actor.frame = 0;
}

function doAttack(attacker, defender) {
    playAnimation(attacker, "attack");

    // å‘½ä¸­å»¶è¿Ÿï¼ˆåŠ¨ä½œåˆ°ä½ï¼‰
    setTimeout(() => {
        const dmg = Math.floor(Math.random() * 12 + 8);

        defender.hp -= dmg;

        // å—ä¼¤åŠ¨ç”»
        playAnimation(defender, "hurt");

        // é—ªç™½æ•ˆæœ
        canvasBattle.style.filter = "brightness(180%)";
        setTimeout(() => canvasBattle.style.filter = "", 80);

        if (defender.hp <= 0) {
            defender.hp = 0;
            playAnimation(defender, "dead");
            setTimeout(endFight, 1500);
        }

    }, 250);
}

function fightLoop() {
    if (p1.hp <= 0 || p2.hp <= 0) return;

    if (Math.random() > 0.5) {
        doAttack(p1, p2);
    } else {
        doAttack(p2, p1);
    }

    setTimeout(() => {
        if (p1.hp > 0 && p2.hp > 0) {
            playAnimation(p1, "idle");
            playAnimation(p2, "idle");
            fightLoop();
        }
    }, 900);
}

// æˆ˜æ–—å»¶è¿Ÿ 3 ç§’å¼€å§‹
setTimeout(fightLoop, 3000);

// æ¸²æŸ“å™¨
function render() {
    bctx.clearRect(0, 0, canvasBattle.width, canvasBattle.height);
    p1.update();
    p2.update();
    p1.draw();
    p2.draw();
    requestAnimationFrame(render);
}
render();


/********************************/
/*         è“å±æ¨¡æ‹Ÿ             */
/********************************/
function endFight() {
    terminal.textContent += "\n>>> æˆ˜æ–—ç»“æŸ\n";
    terminal.textContent += ">>> ç³»ç»Ÿå¼‚å¸¸ï¼æ£€æµ‹åˆ°æœªæˆæƒæ”»å‡»ï¼\n";
    terminal.textContent += ">>> å³å°†å´©æºƒâ€¦â€¦\n";

    setTimeout(showBlueScreen, 2000);
}

function showBlueScreen() {
    document.getElementById("bluescreen").style.display = "block";
}

// ç‚¹å‡»è“å±æç¤º
document.getElementById("bluescreen").addEventListener("click", () => {
    alert("ä½ è¢«æ‰å¼„å•¦ ğŸ˜†ï¼");
});
</script>

</body>
</html>
