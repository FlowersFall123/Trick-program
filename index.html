<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>ç³»ç»Ÿè¢«å…¥ä¾µ Â· ç”Ÿå­˜æ¸¸æˆ</title>
<style>
    body {
        margin: 0;
        background: black;
        overflow: hidden;
        font-family: monospace;
        color: #00ffea;
    }

    /* ===== é»‘å®¢å…¥ä¾µæç¤º ===== */
    #intro {
        position: absolute;
        top: 0; left: 0; right: 0; bottom: 0;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        background: rgba(0,0,0,0.85);
        font-size: 24px;
        z-index: 10;
        color: #00ffea;
        animation: blink 1.2s infinite;
    }

    @keyframes blink {
        0% {opacity: 1;}
        50% {opacity: 0.3;}
        100% {opacity: 1;}
    }

    #startBtn {
        margin-top: 20px;
        padding: 10px 20px;
        border: 2px solid #00ffea;
        background: none;
        color: #00ffea;
        font-size: 20px;
        cursor: pointer;
    }
    #startBtn:hover {
        background: #00ffea33;
    }

    /* ===== æ¸¸æˆç”»å¸ƒ ===== */
    canvas {
        display: block;
    }

    /* ===== å·¦ä¸Šè§’æ“ä½œæç¤º ===== */
    #controlHint {
        position: absolute;
        top: 10px;
        left: 10px;
        color: #00ffea;
        font-size: 18px;
        z-index: 5;
        background: rgba(0, 0, 0, 0.5);
        padding: 5px 10px;
        border-radius: 5px;
    }

    /* ===== è“å± ===== */
    #bluescreen {
        position: absolute;
        top: 0; left: 0;
        width: 100vw; height: 100vh;
        background: #0000AA;
        color: white;
        font-size: 22px;
        padding: 40px;
        white-space: pre-line;
        display: none;
        z-index: 99;
        font-family: Consolas, monospace;
    }

    #bsod-btn {
        margin-top: 20px;
        padding: 10px;
        background: white;
        color: black;
        cursor: pointer;
        font-size: 20px;
    }
</style>
</head>
<body>

<!-- ===== å¼€å§‹å‰æç¤º ===== -->
<div id="intro">
    âš  ç³»ç»Ÿæ­£åœ¨è¢«å…¥ä¾µâ€¦  
    âš  æ£€æµ‹åˆ°æ¶æ„è„šæœ¬æ­£åœ¨è¿è¡Œâ€¦  
    âš  è¯·è¿›è¡Œç”Ÿå­˜æ¸¸æˆéªŒè¯ä½ çš„æƒé™ï¼  

    ğŸ® æ§åˆ¶æ–¹å¼ï¼š  
    â¤ **W A S D** = ä¸Š å·¦ ä¸‹ å³  
    â¤ **æ–¹å‘é”® â†‘ â† â†“ â†’** = ä¸Š å·¦ ä¸‹ å³  

    <button id="startBtn">å¼€å§‹ç”Ÿå­˜æŒ‘æˆ˜</button>
</div>

<!-- ===== æ“ä½œæç¤ºï¼ˆæ¸¸æˆä¸­ä¸€ç›´æ˜¾ç¤ºï¼‰ ===== -->
<div id="controlHint">
    ğŸ® æ§åˆ¶ï¼šW A S D æˆ– â†‘ â† â†“ â†’
</div>

<canvas id="game"></canvas>

<!-- ===== è“å± ===== -->
<div id="bluescreen">
    ğŸ˜± ç³»ç»Ÿå´©æºƒï¼

    å‘ç”Ÿè‡´å‘½é”™è¯¯ï¼šç©å®¶å·²æ­»äº¡  
    é”™è¯¯ä»£ç ï¼šSTOP 0x000000EF  
    åŸå› ï¼šè™«å­è¿½ä¸Šä½  æˆ– çŸ³å¤´ç ¸åˆ°ä½   

    è¯·æŒ‰ä»»æ„é”®ç»§ç»­â€¦

    <button id="bsod-btn">ä½ è¢«æ‰å¼„äº† ğŸ˜ˆ</button>
</div>

<script>
/* =============== åˆå§‹åŒ–ç”»å¸ƒ =============== */
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

/* =============== æ¸¸æˆå˜é‡ =============== */
let player = { x: 300, y: 300, size: 20, speed: 4 };
let bug = { x: 50, y: 50, size: 25, speed: 2 };
let stones = [];

let keys = {};
let alive = true;

/* =============== æ§åˆ¶äº‹ä»¶ =============== */
window.addEventListener("keydown", e => keys[e.key] = true);
window.addEventListener("keyup", e => keys[e.key] = false);

/* =============== å°äººç§»åŠ¨ =============== */
function movePlayer() {
    if (keys["w"] || keys["ArrowUp"]) player.y -= player.speed;
    if (keys["s"] || keys["ArrowDown"]) player.y += player.speed;
    if (keys["a"] || keys["ArrowLeft"]) player.x -= player.speed;
    if (keys["d"] || keys["ArrowRight"]) player.x += player.speed;

    // è¾¹ç•Œæ£€æŸ¥
    player.x = Math.max(0, Math.min(canvas.width, player.x));
    player.y = Math.max(0, Math.min(canvas.height, player.y));
}

/* =============== è™«å­è¿½äºº =============== */
function moveBug() {
    let dx = player.x - bug.x;
    let dy = player.y - bug.y;
    let dist = Math.sqrt(dx*dx + dy*dy);

    bug.x += (dx / dist) * bug.speed;
    bug.y += (dy / dist) * bug.speed;
}

/* =============== éšæœºæ‰è½çŸ³å¤´ =============== */
function spawnStone() {
    stones.push({
        x: Math.random() * canvas.width,
        y: -20,
        size: 20,
        speed: 3 + Math.random() * 3
    });
}

/* =============== ç¢°æ’æ£€æµ‹ =============== */
function checkCollision() {
    // è™«å­è¿½åˆ°
    let dx = player.x - bug.x;
    let dy = player.y - bug.y;
    if (Math.sqrt(dx*dx + dy*dy) < player.size + bug.size) die();

    // çŸ³å¤´ç ¸åˆ°
    stones.forEach(s => {
        if (Math.abs(player.x - s.x) < player.size &&
            Math.abs(player.y - s.y) < player.size) die();
    });
}

/* =============== è“å±æ­»äº¡ =============== */
function die() {
    alive = false;
    document.getElementById("bluescreen").style.display = "block";
}

/* =============== æ¸¸æˆä¸»å¾ªç¯ =============== */
function gameLoop() {
    if (!alive) return;

    ctx.clearRect(0, 0, canvas.width, canvas.height);

    movePlayer();
    moveBug();
    checkCollision();

    // ç”»ç©å®¶
    ctx.fillStyle = "#00ffea";
    ctx.fillRect(player.x - 10, player.y - 10, 20, 20);

    // ç”»è™«å­
    ctx.fillStyle = "red";
    ctx.beginPath();
    ctx.arc(bug.x, bug.y, bug.size, 0, Math.PI * 2);
    ctx.fill();

    // æ‰è½çŸ³å¤´
    if (Math.random() < 0.02) spawnStone();

    stones.forEach(s => {
        s.y += s.speed;
        ctx.fillStyle = "gray";
        ctx.fillRect(s.x - 10, s.y - 10, 20, 20);
    });

    requestAnimationFrame(gameLoop);
}

/* =============== ç‚¹å‡»å¼€å§‹æ¸¸æˆ =============== */
document.getElementById("startBtn").onclick = () => {
    document.getElementById("intro").style.display = "none";
    gameLoop();
};

/* =============== å‡è“å±æŒ‰é’® =============== */
document.getElementById("bsod-btn").onclick = () => {
    alert("ğŸ˜ˆ ä½ è¢«æ‰å¼„å•¦ï¼ç”µè„‘æ²¡å~");
    location.reload();
};
</script>
</body>
</html>
